@model WFM.DAL.Order
@using WFM.DAL
@{

    ViewBag.Title = "Quote Details";
}

<div class="dashboard-ecommerce">
    <div class="container-fluid dashboard-content ">
        <!-- ============================================================== -->
        <!-- pageheader  -->
        <!-- ============================================================== -->
        @Html.Partial("_PageHeaderPartial")
        <!-- ============================================================== -->
        <!-- end pageheader  -->
        <!-- ============================================================== -->
        <div class="border border-primary bg-actual-white">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 m-b-10">
                @using (Html.BeginForm("SaveOrUpdate", "Order", FormMethod.Post, new { @class = "needs-validation", role = "form", enctype = "multipart/form-data", onsubmit = "return readValues();" }))
                {
                    @*<form class="needs-validation" novalidate="">*@
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary("", new { @class = "valFailure" })
                    @Html.HiddenFor(m => m.Id, new { @name = "Id" })
                    <input type="hidden" name="productIdArray" value="" id="productIdArray" />
                    <input type="hidden" name="qtyArray" value="" id="qtyArray" />
                    <input type="hidden" name="descriptionArray" value="" id="descriptionArray" />
                    <input type="hidden" name="costArray" value="" id="costArray" />
                    <input type="hidden" name="vatArray" value="" id="vatArray" />
                    <input type="hidden" name="sizeArray" value="" id="sizeArray" />
                    <input type="hidden" name="VATPercentage" value="@ViewBag.VATPercentage" id="VATPercentage" />




                    <ul id="tabstrip" class="nav nav-pills nav-justified " role="tablist">
                        <li class="nav-item ">
                            <a class="nav-link " href="#_FirstTab" role="tab" data-toggle="tab" style="font-size:medium"><b>Order</b></a>

                        </li>

                        <li class="nav-item">

                            <a class="nav-link" href="#_SecondTab" role="tab" data-toggle="tab" style="font-size:medium"><b>Production Details</b></a>
                        </li>

                        <li class="nav-item">

                            <a class="nav-link" href="#_ThirdTab" role="tab" data-toggle="tab" style="font-size:medium"><b>Payment</b></a>
                        </li>


                    </ul>

                    <div class="tab-content">


                        @*---------------FIRSTTAB-------------*@
                        <div class="tab-pane fade" id="_FirstTab">
                            <div class="form-row">
                                @*<div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-12 mb-2">
                                        <label class="control-label" for="BaseQuoteId">Base Quote</label>
                                        @Html.DropDownList("BaseQuoteId", (SelectList)ViewBag.QuoteList, "Select Quote", new { @class = "form-control" })
                                    </div>*@
                                <div class="col-xl-1 col-lg-2 col-md-6 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="OrderTypeId">Type</label>
                                    @Html.DropDownList("OrderTypeId", (SelectList)ViewBag.OrderTypeList, "Select Type", new { @class = "form-control order-type" })
                                </div>
                                <div class="col-xl-1 col-lg-1 col-md-3 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Code">PO Number</label>
                                    @Html.TextBoxFor(m => m.Code, new { @class = "form-control", @readonly = "readonly" })
                                </div>

                                <div class="col-xl-1 col-lg-1 col-md-3 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="CreatedDate">Created Date</label>
                                    @Html.TextBoxFor(m => m.CreatedDate, new { @class = "form-control", @disabled = "disabled" })
                                </div>

                                <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-12 mb-2 m-t-5">
                                    <label class="control-label" for="ChanneledBy">Channeled By</label>
                                    @Html.DropDownList("ChanneledBy", (SelectList)ViewBag.ChanneledByList, "Select Channeled By", new { @class = "form-control selection" })
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Client"><b>Client</b></label>
                                    @Html.DropDownList("ClientId", (SelectList)ViewBag.ClientList, "Select Client", new { @class = "form-control selection" })
                                </div>
                                <div class="col-xl-1 col-lg-1 col-md-3 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Client">&nbsp;</label><br />
                                    <button type="button" class="btn btn-primary btn-xs full-width" data-toggle="modal" data-target="#exampleModal">
                                        New Client
                                    </button>
                                </div>

                                @*<div  class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5 ">
                                        <label class="control-label" for="Contact No.">Delivery Date</label>
                                        @Html.TextBoxFor(m => m.DeliveryDate, new { @class = "form-control" })
                                    </div>*@



                            </div>
                            <div class="form-row">
                                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 m-t-5 ">
                                    <label class="control-label" for="Contact Person">Contact Person</label>
                                    @Html.TextBoxFor(m => m.ContactPerson, new { @class = "form-control" })
                                </div>
                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Contact No.">Contact No.</label>
                                    @Html.TextBoxFor(m => m.ContactMobile, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Client"><b>Delivery</b></label>
                                    @Html.DropDownList("ClientId", (SelectList)ViewBag.ClientList, "Delivery option", new { @class = "form-control selection" })
                                </div>

                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Contact No.">Delivery Date</label>
                                    @Html.TextBoxFor(m => m.DeliveryDate, new { @class = "form-control" })
                                </div>
                                <div class="col-xl-2 col-lg-3 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Contact Person">Location</label>
                                    @Html.TextBoxFor(m => m.Location, new { @class = "form-control" })
                                </div>
                            </div>


                            <div class="form-row">
                                <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="BaseQuoteId">Quote Number</label>
                                    @Html.DropDownList("BaseQuoteId", (SelectList)ViewBag.QuoteList, "", new { @class = "form-control" })
                                </div>
                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="BaseQuoteId">VAT Number</label>
                                    <input type="text" id="VAT" placeholder="VAT" class="form-control " />
                                </div>

                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Designer">Designer</label>
                                    <input type="text" id="Designer" placeholder="Designer" class="form-control " />
                                </div>

                            </div>
                            <div class="form-row">
                                <div class="col-xl-10 col-lg-3 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Contact No.">Remarks</label>
                                    @Html.TextBoxFor(m => m.Comments, new { @class = "form-control" })
                                </div>



                            </div>
                            <br />
                            <div class="form-row">
                                <div class="m-t-5">
                                    <h5>Client Purchase Order</h5>

                                    <input type="file" id="ClientPurchaseOrder" name="filename">
                                    <input type="submit">
                                </div>
                                <div style="padding-left:2%" class="m-t-5">
                                    <h5>Artwork</h5>

                                    <input type="file" id="Artwork" name="filename">
                                    <input type="submit">
                                </div>

                            </div>



                        </div>
                        @*---------------SecondTAB---------------*@
                        <div class="tab-pane fade" id="_SecondTab">
                            <div id="items" class="m-t-10 m-b-10">
                                <div id="items-header" class="m-t-10 m-b-10">
                                    <div class="form-row m-t-10 m-b-10" id="header-row">

                                        @*<div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                    <label class="control-label" for="Value"><b>Framework</b></label>
                    @Html.DropDownList("FrameworkWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                </div>
                <div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                    <label class="control-label" for="Value"><b>Lettering</b></label>
                    @Html.DropDownList("LetteringWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                </div>
                <div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                    <label class="control-label" for="Value"><b>Illumination</b></label>
                    @Html.DropDownList("IlluminationWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                </div>*@
                                    </div>
                                </div>
                                @if (Model.OrderItems.Count > 0)
                                {
                                    foreach (var quoteItem in Model.OrderItems)
                                    {
                                        <div class="form-row item m-t-10 m-b-20" id="item-row">
                                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12 m-t-5" id="product">
                                                @Html.DropDownListFor(m => quoteItem.CategoryId, new SelectList(ViewBag.CategoryList, "Id", "Name", quoteItem.CategoryId.Value), "Product ", new { @class = "form-control" })
                                            </div>




                                            <div class="col-md-1 m-t-5">
                                                <input type="text" id="Size" placeholder="Size" class="form-control" value="@quoteItem.Size" />
                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                                <input type="text" id="Qty" placeholder="Qty." class="form-control text-right" value="@quoteItem.Qty" />
                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                                <input type="text" id="Cost" placeholder="Cost" class="form-control text-right" value="@quoteItem.UnitCost.Value.ToString("##0.00")" />
                                            </div>
                                            <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                                <input type="text" id="TotalCost" placeholder="Total Cost" class="form-control text-right" readonly="readonly" value="@((quoteItem.UnitCost.Value * quoteItem.Qty.Value).ToString("##0.00"))" />
                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                                <input type="text" id="VAT" placeholder="VAT" class="form-control text-right" readonly="readonly" value="@quoteItem.VAT.Value.ToString("##0.00")" />
                                            </div>
                                            <div class="col-xl-2 col-lg-13 col-md-1 m-t-5">
                                                <input type="text" id="TotalCostVAT" placeholder="Total Cost with VAT" class="form-control text-right" readonly="readonly" value="@(((quoteItem.UnitCost.Value * quoteItem.Qty.Value) + quoteItem.VAT.Value).ToString("##0.00"))" />
                                            </div>
                                            <div class="col-xl-2 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                                <label class="control-label" for="Value"><b>Visibility</b></label>
                                                @Html.DropDownListFor(m => quoteItem.VisibilityId, new SelectList(ViewBag.VisibilityList, "Id", "Name", quoteItem.VisibilityId.Value), "Visibility", new { @class = "form-control selection" })
                                            </div>
                                            <div class="col-xl-2 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                                <label class="control-label" for="Value"><b>Illumination</b></label>
                                                @Html.DropDownList("IlluminationWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Illumination", new { @class = "form-control selection" })
                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                                <label class="control-label" for="Value"><b>Framework</b></label>
                                                @Html.DropDownList("FrameworkWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                                <label class="control-label" for="Value"><b>Lettering</b></label>
                                                @Html.DropDownList("LetteringWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                                <label class="control-label" for="Value"><b>Illumination</b></label>
                                                @Html.DropDownList("IlluminationWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                                            </div>




                                            <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                                <input type="text" placeholder="Description" class="form-control" id="Description" value="@quoteItem.Description" />
                                            </div>
                                            <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                                <input type="text" placeholder="Special Instructions" class="form-control" id="SpecialInstructions" />
                                            </div>
                                            <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                                <input type="text" placeholder="Installation" class="form-control" id="Installation" value="@quoteItem.Installation" />
                                            </div>
                                            @*DEPARTMENT*@
                                            <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                                <label class="control-label" for="Value"><b>Department</b></label>
                                                <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">

                                                    <input type="checkbox" id="PrintingDepartment" value="True">
                                                    <label for="PrintingDepartment"> Printing Department</label><br>

                                                    <input type="checkbox" id="CuttingDepartment" name="CuttingDepartment" value="True">
                                                    <label for="CuttingDepartment"> Cutting Department</label><br>

                                                    <input type="checkbox" id="PlasticDepartment" name="PlasticDepartment" value="True">
                                                    <label for="PlasticDepartment"> Plastic Department</label><br>

                                                    <input type="checkbox" id="Claddingsection" name="Claddingsection" value="True">
                                                    <label for="Claddingsection"> Cladding section</label><br>

                                                    <input type="checkbox" id="ArtDepartment" name="ArtDepartment" value="True">
                                                    <label for="ArtDepartment"> Art  Department</label><br>


                                                    <input type="checkbox" id="steelDepartment" name="steelDepartment" value="True">
                                                    <label for="steelDepartment"> S/steel Department</label><br>

                                                    <input type="checkbox" id="ScreenPrintingDept" name="ScreenPrintingDept" value="True">
                                                    <label for="ScreenPrintingDept"> Screen Printing Dept</label><br>

                                                    <input type="checkbox" id="ProductionDepartment" name="ProductionDepartment" value="True">
                                                    <label for="ProductionDepartment"> Production Department</label><br>

                                                    <input type="checkbox" id="PackingDepartment" name="PackingDepartment" value="True">
                                                    <label for="PackingDepartment"> Packing Department</label><br>

                                                    <input type="checkbox" id="InstallationTeam" name="InstallationTeam" value="True">
                                                    <label for="InstallationTeam"> Installation Team</label><br>
                                                </div>

                                            </div>
                                            <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                                <input type='button' id='remove' value='- Remove' class="btn btn-primary btn-xs full-width" onclick="removeItem(this);" />
                                            </div>
                                        </div>
                                    }
                                }
                                else
                                {
                                    <div class="form-row item m-t-10 m-b-20" id="item-row">
                                        <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12 m-t-5" id="product">
                                            <label class="control-label" for="product"><b>Product</b></label>
                                            @Html.DropDownList("quoteItem_CategoryId", new SelectList(ViewBag.CategoryList, "Id", "Name"), "Product ", new { @class = "form-control" })
                                        </div>



                                        <div class="col-md-1 m-t-5">
                                            <label class="control-label" for="Size"><b>Size</b></label>
                                            <input type="text" id="Size" placeholder="Size" class="form-control" />
                                        </div>
                                        <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                            <label class="control-label" for="Qty"><b>Qty</b></label>
                                            <input type="text" id="Qty" placeholder="Qty." class="form-control " />
                                        </div>
                                        <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                            <label class="control-label" for="Cost"><b>Cost</b></label>
                                            <input type="text" id="Cost" placeholder="Cost" class="form-control " />
                                        </div>
                                        <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                            <label class="control-label" for="TotalCost"><b>Total Cost</b></label>
                                            <input type="text" id="TotalCost" placeholder="Total Cost" class="form-control " />
                                        </div>
                                        <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                            <label class="control-label" for="VAT"><b>VAT</b></label>
                                            <input type="text" id="VAT" placeholder="VAT" class="form-control" />
                                        </div>
                                        <div class="col-xl-2 col-lg-13 col-md-1 m-t-5">
                                            <label class="control-label" for="TotalCostVAT"><b>Total Cost with VAT</b></label>
                                            <input type="text" id="TotalCostVAT" placeholder="Total Cost with VAT" class="form-control" />
                                        </div>
                                        <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Value"><b>Visibility</b></label>
                                            @Html.DropDownList("quoteItem_VisibilityId", new SelectList(ViewBag.VisibilityList, "Id", "Name"), "Visibility", new { @class = "form-control selection" })
                                        </div>
                                        <div class="col-xl-2 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Value"><b>Illumination</b></label>
                                            @Html.DropDownList("IlluminationWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Illumination", new { @class = "form-control selection" })
                                        </div>




                                        <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Description"><b>Description</b></label>
                                            <input type="text" placeholder="Description" class="form-control" id="Description" />
                                        </div>

                                        <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="SpecialInstructions"><b>Special Instructions</b></label>
                                            <input type="text" placeholder="Special Instructions" class="form-control" id="SpecialInstructions" />
                                        </div>
                                        <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Installation"><b>Installation</b></label>
                                            <input type="text" placeholder="Installation" class="form-control" id="Installation" />
                                        </div>
                                        <br />

                                        <div class="col-xl-2 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Value"><b>Framework</b></label>
                                            @Html.DropDownList("FrameworkWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                                        </div>
                                        <div class="col-xl-2 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Value"><b>Lettering</b></label>
                                            @Html.DropDownList("LetteringWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                                        </div>
                                        <div class="col-xl-2 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                            <label class="control-label" for="Value"><b>Illumination</b></label>
                                            @Html.DropDownList("IlluminationWarrantyPeriod", (SelectList)ViewBag.WarrantyPeriodList, "Select Warranty", new { @class = "form-control selection" })
                                        </div>

                                        <div class="col-xl-1 col-lg-1 col-md-6 col-sm-12 col-12 m-t-5">
                                            <br />

                                            <input type='button' id='remove' value='- Remove' class="btn btn-primary btn-xs full-width" onclick="removeItem(this);" />
                                        </div>


                                    </div>

                                    <div>
                                        <input type='button' id='add' value='+ Add item' class="btn btn-primary btn-xs" />
                                    </div>
                                }
                                       
                                @*DEPARTMENT*@
                                <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Value"><b>Department</b></label>
                                    <div class="col-xl-11 col-lg-11 col-md-11 col-sm-12 col-12 m-t-5">

                                        <input type="checkbox" id="PrintingDepartment" value="True">
                                        <label for="PrintingDepartment"> Printing Department</label><br>

                                        <input type="checkbox" id="CuttingDepartment" name="CuttingDepartment" value="True">
                                        <label for="CuttingDepartment"> Cutting Department</label><br>

                                        <input type="checkbox" id="PlasticDepartment" name="PlasticDepartment" value="True">
                                        <label for="PlasticDepartment"> Plastic Department</label><br>

                                        <input type="checkbox" id="Claddingsection" name="Claddingsection" value="True">
                                        <label for="Claddingsection"> Cladding section</label><br>

                                        <input type="checkbox" id="ArtDepartment" name="ArtDepartment" value="True">
                                        <label for="ArtDepartment"> Art  Department</label><br>


                                        <input type="checkbox" id="steelDepartment" name="steelDepartment" value="True">
                                        <label for="steelDepartment"> S/steel Department</label><br>

                                        <input type="checkbox" id="ScreenPrintingDept" name="ScreenPrintingDept" value="True">
                                        <label for="ScreenPrintingDept"> Screen Printing Dept</label><br>

                                        <input type="checkbox" id="ProductionDepartment" name="ProductionDepartment" value="True">
                                        <label for="ProductionDepartment"> Production Department</label><br>

                                        <input type="checkbox" id="PackingDepartment" name="PackingDepartment" value="True">
                                        <label for="PackingDepartment"> Packing Department</label><br>

                                        <input type="checkbox" id="InstallationTeam" name="InstallationTeam" value="True">
                                        <label for="InstallationTeam"> Installation Team</label><br>
                                    </div>

                                </div>

                            </div>
                        </div>

                        @*---------------THIRDTAB---------------*@
                        <div class="tab-pane fade" id="_ThirdTab">

                            <div class="form-row">
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="Item"><b>Item</b></label>
                                    <input type="text" id="Item" placeholder="Item" class="form-control " />
                                </div>

                                <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="Qty"><b>Qty</b></label>
                                    <input type="text" id="Qty" placeholder="Qty." class="form-control text-right" />
                                </div>
                                <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="Cost"><b>Cost</b></label>
                                    <input type="text" id="Cost" placeholder="Cost" class="form-control text-right" />
                                </div>
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="TotalCost"><b>Total Cost</b></label>
                                    <input type="text" id="TotalCost" placeholder="Total Cost" class="form-control text-right" />
                                </div>


                            </div>
                            <div class="form-row">
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5" id="a">
                                    <label class="control-label" for="Text1"><b>Additional charge</b></label>
                                    <input type="text" id="Text1" placeholder="Additional charge" class="form-control" />
                                </div>
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="Item"><b>Item</b></label>
                                    <input type="text" id="Item" placeholder="Item" class="form-control " />
                                </div>

                                <div class="col-xl-1 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="Qty"><b>Qty</b></label>
                                    <input type="text" id="Qty" placeholder="Qty." class="form-control text-right" />
                                </div>
                                <div class="col-xl-1 col-lg-1 col-md-1 m-t-5" id="a">
                                    <label class="control-label" for="Text1"><b>Cost</b></label>
                                    <input type="text" id="Text1" placeholder="" class="form-control" />
                                </div>
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="TotalCost"><b>Total Cost</b></label>
                                    <input type="text" id="TotalCost" placeholder="Total Cost" class="form-control text-right" />
                                </div>
                                <div>
                                    <br />
                                    <input id="btnAdd" type="button" value="AddCharge" class="btn btn-primary btn-xs full-width" />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="OrderTotal"><b>Order Total</b></label>
                                    <input type="text" id="OrderTotal" placeholder="OrderTotal" class="form-control " readonly="readonly" />
                                </div>
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="VAT"><b>VAT</b></label>
                                    <input type="text" id="VAT" placeholder="VAT" class="form-control" />
                                </div>
                                <div class="col-xl-2 col-lg-13 col-md-1 m-t-5">
                                    <label class="control-label" for="TotalCostVAT"><b>Total Cost with VAT</b></label>
                                    <input type="text" id="TotalCostVAT" placeholder="Total Cost with VAT" class="form-control" />
                                </div>


                            </div>
                            <div class="form-row">
                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="AdvancePayment"><b>Advance Payment</b></label>
                                    <input type="text" id="AdvancePayment" placeholder="Advance Payment" class="form-control" />
                                </div>


                                <div class="col-xl-2 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="BalancePayment"><b>Balance Payment</b></label>
                                    <input type="text" id="BalancePayment" placeholder="Balance Payment" class="form-control " />
                                </div>

                            </div>
                            <div class="form-row">
                                <div class="col-xl-10 col-lg-1 col-md-1 m-t-5">
                                    <label class="control-label" for="PaymentDetails"><b>Payment Details</b></label>
                                    <input type="text" id="PaymentDetails" placeholder="Payment Details." class="form-control " />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col-xl-10 col-lg-2 col-md-12 col-sm-12 col-12 m-t-5">
                                    <label class="control-label" for="Remarks"><b>Remarks</b></label>
                                    <input type="text" id="Remarks" placeholder="Remarks" class="form-control " />
                                </div>

                            </div>
                            <div id="outer">
                                <div class="inner"><input type="submit" class="btn btn-primary" value="Save" /></div>
                            </div>

                        </div>

                    </div>

                }
            </div>
        </div>
    </div>
</div>
                        <script>

                            function removeItem(elem) {
                                if ($('#item-count').val() != "1") {
                                    $('#item-count').val(parseInt($('#item-count').val()) - 1);
                                    $(elem).parent().parent('div').remove();
                                }
                                else {
                                    alert('Last item cannot be removed');
                                }
                            }
                            $(document).ready(function () {
                                $("#btnAdd").click(function () {
                                    $("#a").append('<div class="con"> <label class="control-label" for="Text1"><b>Additional charge</b></label> <input type="text" id="Text1" value="" class="form-control"/> <>' + '<input type="button" class="btnRemove" value="Remove"/></div>');

                                });
                                // delegating event here
                                $('body').on('click', '.btnRemove', function () {
                                    $(this).parent('div.con').remove()

                                });
                            });
                            $("#BaseQuoteId").change(function () {
                                var qouteid = $('#BaseQuoteId').val();
                                alert(qouteid)
                                $.ajax({
                                    url: '/Order/Convert',
                                    //url: '/Order/Index',
                                    data: { "qouteid": qouteid },
                                    dataType: "json",
                                    contentType: 'application/json',
                                    method: 'GET',
                                    success: function (data) {

                                        alert(data.ClientId);
                                        var clientid = data.ClientId;
                                        var header = data.Header;
                                        var contactperson = data.ContactPerson;
                                        var contactnum = data.ContactMobile;
                                        var framework = data.FrameworkWarrantyPeriod
                                        var warranty = data.LetteringWarrantyPeriod
                                        var illumination = data.IlluminationWarrantyPeriod


                                        $('#ClientId').prop('selectedIndex', clientid);
                                        $('#Header').val(header);
                                        $('#ContactPerson').val(contactperson);
                                        $('#ContactMobile').val(contactnum);
                                        $('#FrameworkWarrantyPeriod').prop('selectedIndex', framework);
                                        $('#LetteringWarrantyPeriod').prop('selectedIndex', warranty);
                                        $('#IlluminationWarrantyPeriod').prop('selectedIndex', illumination);

                                        /*   $('#ClientId').text(y);*/
                                        //var employeeTable = $('#employee tbody');
                                        //employeeTable.empty();

                                        //$(data).each(function (index, emp) {
                                        //    employeeTable.append('<tr><td>' + emp.ID + '</td><td>'
                                        //        + emp.Name + '</td><td>' + emp.Gender + '</td><td>'
                                        //        + emp.Phone + '</td><td>' + emp.Email + '</td><td>'
                                        //        + emp.Age + '</td><td>' + emp.Salary + '</td></tr>');
                                        //});
                                    },
                                    error: function (err) {
                                        alert("");
                                        console.log(err);
                                    }
                                });


                            });
                            $(document).ready(function () {
                                //$('.selection').select2();

                                var d = new Date();
                                var today = new Date((d.getFullYear(), d.getMonth(), d.getDate()) + 'T00:00:00Z');
                                $("#Version").val("1");
                                var formattedNumber = ("0" + (d.getMonth() + 1)).slice(-2);
                                $("#Month").val(formattedNumber);
                                var year = d.getFullYear().toString().substring(2, 4);
                                $("#Year").val(year);
                                $("#CreatedDate").val(d.getDate() + "-" + formattedNumber + "-" + year);

                                $('#IsVAT').change(function () {
                                    setTotals();
                                    if ($(this).is(":checked")) {
                                        $('#Code').val($('#Code').val().replace('STA/', 'ST/'));
                                    }
                                    else {
                                        $('#Code').val($('#Code').val().replace('ST/', 'STA/'));
                                    }
                                });

                                $('#add').click(function () {
                                    var n = $('.item').length + 1;
                                    var temp = $('.item:first').clone();
                                    //$('input:first', temp).attr('placeholder', '#' + n)
                                    $('.item:last').after(temp);
                                    $('#item-count').val(parseInt($('#item-count').val()) + 1);
                                });






                                //Advanced payment
                                $('#AdvancePayment').change(function () {

                                    // alert($('#hidden-1005').val());
                                    var y = $('#hidden-1005').val().replace("{payment}", $('#AdvancePayment').val());
                                    $('#term-1005').text(y);

                                    var y = $('#hidden-1').val().replace("{payment}", $('#AdvancePayment').val());
                                    $('#term-1').text(y);

                                });

                                //power supply
                                $('#PowerSupplyAmp').change(function () {

                                    var y = $('#hidden-1003').val().replace("{amp}", $('#PowerSupplyAmp').val());
                                    $('#term-1003').text(y);

                                });

                                //valid days
                                $('#ValidDays').change(function () {

                                    var y = $('#hidden-2').val().replace("{Validity}", $('#ValidDays').val());
                                    $('#term-2').text(y);

                                });

                                //delivery period
                                $('#DeliveryPeriod').change(function () {

                                    var y = $('#hidden-1005').val().replace("{delivery}", $('#DeliveryPeriod').val());
                                    $('#term-1005').text(y);

                                });

                                $(document).on("change", "select#quoteItem_CategoryId", function () {
                                    elem = $(this);
                                    var obj = { id: $(elem).val() };
                                    AjaxCall('/Category/GetDescriptionById', JSON.stringify(obj), 'POST').done(function (response) {
                                        if (response.length > 0) {
                                            $(elem).parent().parent('div').find('input#Description').val(response);
                                        }
                                    }).fail(function (error) {
                                        alert(error.StatusText);
                                    });
                                });

                                $(document).on("change", "select#ClientId", function () {
                                    elem = $(this);
                                    var obj = { id: $(elem).val() };
                                    AjaxCall('/Client/GetClientById', JSON.stringify(obj), 'POST').done(function (response) {
                                        $('#ContactPerson').val(response.CPName);
                                        $('#ContactMobile').val(response.CPMobile);
                                    }).fail(function (error) {
                                        alert(error.StatusText);
                                    });
                                });

                                $(document).on("change", "input#Qty", function () {
                                    elem = $(this);
                                    setTotals();
                                });

                                $(document).on("change", "input#Cost", function () {
                                    elem = $(this);
                                    setTotals();
                                });
                            })

                            function setTotals() {
                                var qty = $(elem).parent().parent('div').find('input#Qty').val();
                                var cost = $(elem).parent().parent('div').find('input#Cost').val();
                                var VATPercentage = $("#VATPercentage").val();
                                var Total = parseFloat(qty) * parseFloat(cost);

                                if (isNaN(Total)) {
                                    Total = 0;
                                }

                                var VAT = 0;

                                if ($('#IsVAT').is(":checked")) {
                                    VAT = ((parseFloat(qty) * parseFloat(cost)) * parseFloat(VATPercentage)) / 100;
                                }
                                var TotalWithVAT = Total + VAT;

                                $(elem).parent().parent('div').find('input#TotalCost').val(number_format(Total, 2, '.', ','));
                                $(elem).parent().parent('div').find('input#VAT').val(number_format(VAT, 2, '.', ','));
                                $(elem).parent().parent('div').find('input#TotalCostVAT').val(number_format(TotalWithVAT, 2, '.', ','));
                            }

                            function AjaxCall(url, data, type) {
                                return $.ajax({
                                    url: url,
                                    type: type ? type : 'GET',
                                    data: data,
                                    contentType: 'application/json'
                                });
                            }

                            number_format = function (number, decimals, dec_point, thousands_sep) {
                                number = number.toFixed(decimals);

                                var nstr = number.toString();
                                nstr += '';
                                x = nstr.split('.');
                                x1 = x[0];
                                x2 = x.length > 1 ? dec_point + x[1] : '';
                                var rgx = /(\d+)(\d{3})/;

                                while (rgx.test(x1))
                                    x1 = x1.replace(rgx, '$1' + thousands_sep + '$2');

                                return x1 + x2;
                            }

                            function readValues() {
                             
                                var productIdArray = [];
                                var qtyArray = [];
                                var descriptionArray = [];
                                var costArray = [];
                                var vatArray = [];
                                var sizeArray = [];
                                var obj_list = document.querySelectorAll('[class*="form-row item m-t-10 m-b-20"]');
                                $.each(obj_list, function (key, obj) {
                                    productIdArray.push($(obj).find('select#quoteItem_CategoryId').val());
                                    qtyArray.push($(obj).find('input#Qty').val());
                                    descriptionArray.push($(obj).find('input#Description').val());
                                    costArray.push($(obj).find('input#Cost').val());
                                    vatArray.push($(obj).find('input#VAT').val());
                                    vatArray.push($(obj).find('input#VAT').val());
                                    sizeArray.push($(obj).find('input#Size').val());
                                });

                                $('#productIdArray').val(productIdArray);
                                $('#qtyArray').val(qtyArray);
                                $('#descriptionArray').val(descriptionArray);
                                $('#costArray').val(costArray);
                                $('#vatArray').val(vatArray);
                                $('#sizeArray').val(sizeArray);

                                return true;
                            }
                        </script>

                        @section Scripts {
                            @Scripts.Render("~/bundles/jqueryval")
                        }
